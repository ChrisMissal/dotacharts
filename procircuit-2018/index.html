<html>
<head>
<title>DPC</title>
</head>
<body>
    <svg width="1280" height="1280"></svg>
    <script src="https://unpkg.com/lodash"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://unpkg.com/d3-sankey@0.6"></script>
    <script src="scripts/circuit.js"></script>
    <script type="text/javascript">
        var circuit = new Circuit();

        // TOURNAMENTS
        circuit.tournament('StarLadder Season 3')
            .awards(150, ['MUTAMBAMAN','Miracle-','MinD_ControL','GH','KuroKy'])
            .awards(90, ['Moon','Mushi','iceiceice','Jabz','ninjaboogie'])
            .awards(30, ['Ace','MidOne','YapzOr','Puppey','Fata','Chessie','Limmp','Moo','Zfreek','Kyle']);
        
        circuit.tournament('PGL Open Bucharest')
            .awards(150, ['Moon','Mushi','iceiceice','Jabz','ninjaboogie'])
            .awards(67, ['Ame','Somnus`M','fy','Yao'])
            .awards(45, ['QQQ'])
            .awards(30, ['UNiVeRsE','Arteezy','Fear','SumaiL','Cr1t-','Forev','MP','Febby','Dubu','QO']);
        
        circuit.tournament('ESL One Hamburg')
            .awards(750, ['RAMZES666','No[O]ne-','9pasha','Lil','Solo'])
            .awards(450, ['Ace','MidOne','YapzOr','Puppey','Fata'])
            .awards(150, ['MUTAMBAMAN','Miracle-','MinD_ControL','GH','KuroKy','Moogy','Sccc','kpii','Kaka','Faith']);
        
        circuit.tournament('Dota Pit League Season 6')
            .awards(150, ['MUTAMBAMAN','Miracle-','MinD_ControL','GH','KuroKy'])
            .awards(90, ['Paparazi','Ori','eLeVeN','LaNm','Fenrir'])
            .awards(45, ['Moogy','Sccc','kpii','Kaka','Faith'])
            .awards(15, ['RAMZES666','No[O]ne-','9pasha','Lil','Solo']);
        
        circuit.tournament('Perfect World Masters')
            .awards(150, ['Moogy','Sccc','kpii','Kaka','Faith'])
            .awards(90, ['Paparazi','Ori','eLeVeN','LaNm','Fenrir'])
            .awards(45, ['Monet','AhFu','Super','ddc','Inflame'])
            .awards(15, ['Chessie','Limmp','Moo','Zfreek','Kyle']);
        
        circuit.tournament('DreamLeague Season 8')
            .awards(750, ['Ace','MidOne','YapzOr','Puppey','Fata'])
            .awards(450, ['MATUMBAMAN','Miracle-','MinD_ControL','GH','KuroKy'])
            .awards(225, ['UNiVeRsE','Arteezy','Fear','SumaiL','Cr1t-'])
            .awards(75, ['RodjER','Crystallize','Dendi','GeneRaL','SoNNeikO']);

        circuit.tournament('Mars Dota 2 League Macau')
            .awards(150, ['N0tail','Resolut1on','s4','JerAx','Fly'])
            .awards(90, ['Raven','Kuku','Sam_H','Tims','1437'])
            .awards(30, ['RodjER','Crystallize','Dendi','GeneRaL','SoNNeikO'])
            .awards(22, ['RAMZES666','No[O]ne-','9pasha','Lil'])
            .awards(22, ['Artstyle']);

        circuit.tournament('The Summit 8')
            .awards(112, ['RAMZES666','No[O]ne-','9pasha','Lil',])
            .awards(75, ['Artstyle'])
            .awards(67, ['EternalEnvy','DJ','Pieliedie','Ohaiyo'])
            .awards(45, ['Abed'])
            .awards(30, ['N0tail','Resolut1on','s4','JerAx','Fly','Exotic_Deer','Nisha','Patos','eL lisasH','kacor']);

        circuit.tournament('Captain\'s Draft 4.0')
            .awards(150, ['Ace','MidOne','YapzOr','Puppey','Fata'])
            .awards(90, ['Paparazi','Ori','eLeVeN','LaNm','Fenrir'])
            .awards(30, ['N0tail','Resolut1on','s4','JerAx','Fly','Moon','Mushi','iceiceice','Jabz','ninjaboogie'])

        circuit.tournament('ESL One Genting')
            .awards(200, ['Moogy','Sccc','kpii','Kaka','Faith'])
            .awards(120, ['MATUMBAMAN','Miracle-','MinD_ControL','GH','KuroKy'])
            .awards(40, ['Ace','MidOne','YapzOr','Puppey','Arteezy','Fear','SumaiL','Cr1t-','MISERY'])
            .awards(20, ['Fata','Ohaiyo']);

        circuit.tournament('StarLadder Season 4')
            .awards(150, ['MUTAMBAMAN','Miracle-','MinD_ControL','GH','KuroKy'])
            .awards(90, ['Ame','Somnus`M','fy','Chalice','xNova'])
            .awards(30, ['Moogy','Sccc','kpii','Kaka','Faith','Moon','Mushi','iceiceice','Jabz','ninjaboogie']);
        
        circuit.tournament('ESL One Katowice')
            .awards(750, ['RAMZES666','No[O]ne-','9pasha','Lil','Solo'])
            .awards(450, ['Paparazi','Ori','eLeVeN','LaNm','Fenrir'])
            .awards(225, ['MUTAMBAMAN','Miracle-','MinD_ControL','GH','KuroKy'])
            .awards(75, ['UNiVeRsE','EternalEnvy','DJ','Pieliedie','Abed']);

        // TEAMS
        circuit.team('Virtus Pro')
            .recognizes(['RAMZES666','No[O]ne-','9pasha','Solo','RodjER']);

        circuit.team('Team Secret')
            .recognizes(['Ace','MidOne','YapzOr','Puppey','Fata']);

        circuit.team('Team Liquid')
            .recognizes(['MATUMBAMAN','Miracle-','MinD_ControL','GH','KuroKy']);

        circuit.team('Vici Gaming')
            .recognizes(['Paparazi','Ori','eLeVeN','LaNm','Fenrir']);

        circuit.team('Newbee')
            .recognizes(['Moogy','Sccc','kpii','Kaka','Faith']);

        circuit.team('Na`Vi')
            .recognizes(['Lil','Crystallize','Dendi','GeneRaL']);

        circuit.team('Mineski')
            .recognizes(['Moon','Mushi','iceiceice','Jabz','ninjaboogie']);

        circuit.team('Evil Geniuses')
            .recognizes(['Arteezy','Fear','SumaiL','Cr1t-','MISERY']);

        circuit.team('OG')
            .recognizes(['N0tail','Resolut1on','s4','JerAx','Fly']);
            
        circuit.team('Complexity')
            .recognizes(['Chessie','Limmp','Moo','Zfreek','Kyle']);
        
        circuit.team('Fnatic')
            .recognizes(['UNiVeRsE','DJ','EternalEnvy','Pieliedie','Abed']);
        
        circuit.team('LGD-Gaming')
            .recognizes(['Ame','fy','Somnus`M','Chalice','xNova']);

        circuit.team('TNC')
            .recognizes(['Kuku','Raven','Sam_H','Tims']);

        circuit.team('LGD.Forever Young')
            .recognizes(['Ohaiyo','Yao','Ahfu','Monet','Super']);
        
        circuit.team('Immortals')
            .recognizes(['Dubu','Febby','MP']);

        circuit.team('Kinguin')
            .recognizes(['Patos','Exotic_Deer','kacor','Nisha']);

        circuit.team('VGJ Thunder')
            .recognizes(['ddc']);

        circuit.team('Echo International Team')
            .recognizes(['Forev']);

        window.data = circuit.buildGraph();

    </script>
    <script type="text/javascript">
        var svg = d3.select("svg"),
            width = +svg.attr("width"),
            height = +svg.attr("height");
        
        var formatNumber = d3.format(",.0f"),
            format = function(d) { return formatNumber(d); },
            color = d3.scaleOrdinal(d3.schemeCategory10);
        
        var sankey = d3.sankey()
            .nodeWidth(15)
            .nodePadding(10)
            .extent([[1, 1], [width - 1, height - 6]]);
        
        var link = svg.append("g")
            .attr("class", "links")
            .attr("fill", "none")
            .attr("stroke", "#000")
            .attr("stroke-opacity", 0.2)
        .selectAll("path");
        
        var node = svg.append("g")
            .attr("class", "nodes")
            .attr("font-family", "sans-serif")
            .attr("font-size", 10)
        .selectAll("g");
        
        var dpcgraph = window.data;

        sankey(dpcgraph);
        
        link = link
            .data(dpcgraph.links)
            .enter().append("path")
            .attr("d", d3.sankeyLinkHorizontal())
            .attr("stroke-width", function(d) { return Math.max(1, d.width); });
        
        link.append("title")
            .text(function(d) { return d.source.name + " â†’ " + d.target.name + "\n" + format(d.value); });
        
        node = node
            .data(dpcgraph.nodes)
            .enter().append("g");
        
        node.append("rect")
            .attr("x", function(d) { return d.x0; })
            .attr("y", function(d) { return d.y0; })
            .attr("height", function(d) { return d.y1 - d.y0; })
            .attr("width", function(d) { return d.x1 - d.x0; })
            .attr("fill", function(d) { return color(d.name.replace(/ .*/, "")); })
            .attr("stroke", "#000");
        
        node.append("text")
            .attr("x", function(d) { return d.x0 - 6; })
            .attr("y", function(d) { return (d.y1 + d.y0) / 2; })
            .attr("dy", "0.35em")
            .attr("text-anchor", "end")
            .text(function(d) { return d.name; })
            .filter(function(d) { return d.x0 < width / 2; })
            .attr("x", function(d) { return d.x1 + 6; })
            .attr("text-anchor", "start");
        
        node.append("title")
            .text(function(d) { return d.name + "\n" + format(d.value); });

    </script>
</body>
</html>
